<div class="menu">

    <app-menu-bar></app-menu-bar>

</div>

<div class="container">

    <div class="container_background">

        <div class="container_background_informations">
        
            <app-informations
                label="Produtos"
                [value]="informations.quantity"
            ></app-informations>
            <app-informations
                label="Itens em estoque"
                [value]="informations.total"
            ></app-informations>
            <app-informations
                label="Estoque crÃ­tico"
                [value]="informations.warnings"
            ></app-informations>

        </div>

        <div class="container_background_options">

            <app-search-bar
                [(filter)]="filter"
            ></app-search-bar>

            @if (user_role < 4) {

                <app-button
                    label="Adicionar produto"
                    (clicked)="popup(1)"
                ></app-button>

            }

        </div>

        <div class="container_background_products">

            @for (product of filteredProducts; track product.id) {
                <app-product
                    [id]="product.id"
                    [title]="product.name"
                    [category]="product.category"
                    [quantity]="product.quantity"
                    [min_quantity]="product.min_quantity"
                    [user_role]="user_role"
                    (edit)="popup(2); product_id = $event"
                    (change)="popup(3); product_id = $event"
                    (delete)="popup(4); product_id = $event"
                    (information)="popup(5); product_id = $event"
                ></app-product>
            }

        </div>

    </div>

</div>

@if (popup_value === 1) {

    <div class="popup">

        <app-create-product
            [options]="categories"
            (clicked)="popup(0)"
        ></app-create-product>

    </div>

}

@if (popup_value === 2) {

    <div class="popup">

        <app-edit-product
            [options]="categories"
            [product_id]="product_id"
            (clicked)="popup(0)"
        ></app-edit-product>

    </div>

}

@if (popup_value === 3) {

    <div class="popup">

        <app-change-product
            [options]="reasons"
            [product_id]="product_id"
            (clicked)="popup(0)"
        ></app-change-product>

    </div>

}

@if (popup_value === 4) {

    <div class="popup">

        <app-delete-product
            [product_id]="product_id"
            (clicked)="popup(0)"
        ></app-delete-product>

    </div>

}

@if (popup_value === 5) {

    <div class="popup">

        <app-show-product
            [product_id]="product_id"
            (clicked)="popup(0)"
        ></app-show-product>

    </div>

}